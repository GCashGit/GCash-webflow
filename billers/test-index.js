const createItem=(e,t)=>{let a=t.cloneNode(!0);a.classList.remove("hidden");let r=a.querySelector(".biller-item-title"),l=a.querySelector(".biller-item-description"),s=a.querySelector('[data-element="gcredit"]'),i=a.querySelector('[data-element="gcredit"] > p'),n=a.querySelector('[data-element="fee"]'),o=a.querySelector('[data-element="fee-amount"]'),c=a.querySelector(".biller-card-label-wrapper");return i.textContent="Accepts",r&&(r.textContent=e.name||e.Name),l&&(l.textContent=e.payment_date),e.has_gcredit||e.has_ggives||(s.style.display="none"),e.has_gcredit&&!e.has_ggives?($(s).attr("data-gcredit",1),i.textContent=i.textContent+" GCredit"):e.has_ggives&&!e.has_gcredit?($(s).attr("data-ggives",1),i.textContent=i.textContent+" GGives"):($(s).attr("data-gcredit",1),$(s).attr("data-ggives",1),i.textContent=i.textContent+" GCredit, GGives"),e.fee_amount>0?o.textContent=`${e.fee_amount} fee`:n.style.display="none",!e.has_gcredit&&e.fee_amount<=0&&(c.style.display="none"),a};async function fetchPartners(e){try{let t=await fetch(e),a=await t.json();return a}catch(r){return console.log("fetchPartners(): ",r.message),[]}}function renderItems(e,t,a){e.textContent="";t.map(e=>createItem(e,a)).map(t=>e.append(t)),e.animate({opacity:[0,1]},300)}!async function(){let e=document.querySelector(".biller-result-card"),t=document.querySelector(".biller-result.billers_collection-list"),a=$("#field-2"),r=$(".biller-list-item"),l=$("#pagination-area"),s=RegExp("[^A-Za-z]"),i=$(".results-letter-index"),n=$(".biller-filter-reset-btn"),o=$(".alphabet-nav > .alphabet-nav_letter"),c="",d="",m=a.val(),p=await fetchPartners("https://gcashgit.github.io/GCash-webflow/billers/data.json"),g=[],C=$(window).width();function h(){let e=$(".biller-result.billers_collection-list > .biller-result-card").first(),t=e.find(".biller-item-title ").text();s.test(t.charAt(0))?i.text("#"):i.text(t.charAt(0))}function u(a){let r=`<svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20.5" cy="20.4922" r="19" stroke="#025AE9" stroke-width="2"/>
        <path d="M19 24L23 20L19 16" stroke="#025AE9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        `;C>=1280?l.pagination({ulClassName:"pagination-list-wrapper",dataSource:a,prevText:r,nextText:r,showNavigator:!0,formatNavigator:"Results: <%= rangeStart %> - <%= rangeEnd %> of <%= totalNumber %>",pageSize:15,pageRange:1,callback:function(a,r){renderItems(t,a,e),h()}}):C<=1279&&480<=C?l.pagination({ulClassName:"pagination-list-wrapper",dataSource:a,prevText:r,nextText:r,showNavigator:!0,formatNavigator:"Results: <%= rangeStart %> - <%= rangeEnd %> of <%= totalNumber %>",pageSize:9,pageRange:1,callback:function(a,r){renderItems(t,a,e),h()}}):C<=479&&l.pagination({ulClassName:"pagination-list-wrapper",dataSource:a,prevText:r,nextText:r,showNavigator:!0,formatNavigator:"Results: <%= rangeStart %> - <%= rangeEnd %> of <%= totalNumber %>",pageSize:5,pageRange:1,callback:function(a,r){renderItems(t,a,e),h()}})}function w(e){o.each(function(t){!function e(t,a){if(s.test(a)){for(let r=0;r<t.length;r++)if(s.test(t[r].name.charAt(0)))return!0}else for(let l=0;l<t.length;l++)if(t[l].name.toLowerCase().startsWith(a.toLowerCase()))return!0;return!1}(e,$(this).data("letter"))?$(this).addClass("disabled"):$(this).removeClass("disabled")})}function f(e,t=" "){let a=$(".no-results-wrapper"),r=$(".no-results-wrapper > .no-results-label .result"),s=$(".results-wrapper"),i=$(".results-letter-index"),n=$(".biller-view-options");e?(a.removeClass("disabled"),l.hide(),s.hide(),i.hide(),r.text(t),n.addClass("no-result")):(a.addClass("disabled"),l.show(),s.show(),n.removeClass("no-result"),C<479&&i.show())}function v(){c.length>0||d.length>0?n.removeClass("no-filters"):n.addClass("no-filters")}t.style.opacity="1",a.on("input",function(){m=$(this).val().toLowerCase();let e="";c.length>0&&d.length>0?(s.test(d)?(w(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.biller_type.includes(c))),g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)&&e.biller_type.includes(c)&&s.test(e.name.charAt(0))),l.pagination("destroy"),u(g)):(w(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.biller_type.includes(c))),g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)&&e.biller_type.includes(c)&&e.name.toLowerCase().startsWith(d)),l.pagination("destroy"),u(g)),f(!1),e=`Category: ${c}, Letter: ${d.toUpperCase()} and ${m}`):c.length>0&&0==d.length?(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)&&e.biller_type.includes(c)),l.pagination("destroy"),u(g),w(g),f(!1),e=`Category: ${c} and ${m}`):0==c.length&&d.length>0?(w(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m))),s.test(d)?(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)&&s.test(e.name.charAt(0))),l.pagination("destroy"),u(g),f(!1)):(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)&&e.name.toLowerCase().startsWith(d)),l.pagination("destroy"),u(g),f(!1)),e=`Letter: ${d.toUpperCase()} and ${m}`):(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().includes(m)),l.pagination("destroy"),u(g),w(g),f(!1),e=m),0==g.length&&(u(g),w(g),f(!0,e))}),r.on("click",function(){let e="";$(".biller_dropdown-current").text($(this).children(".biller-label").text()),"all categories"===(c=$(this).children(".biller-label").text()).toLowerCase()?(w(g=p.sort((e,t)=>e.name.localeCompare(t.name))),g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().startsWith(d)),l.pagination("destroy"),u(g),f(!1),c=""):d.length>0?(s.test(d)?g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.biller_type.includes(c)&&s.test(e.name.charAt(0))):(w(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.biller_type.includes(c))),g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().startsWith(d)&&e.biller_type.includes(c)),l.pagination("destroy"),u(g),f(!1)),e=`Category: ${c}, Starting Letter: ${d}`):(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.biller_type.includes(c)),l.pagination("destroy"),u(g),w(g),f(!1),e=`Category: ${c}`),0==g.length&&(u(g),w(g),f(!0,e)),a.val(""),v()}),$(".biller-view-options.w-radio").on("click",function(){let e=$(".biller-result.billers_collection-list"),a=$(".biller-services-content.card-view > .biller-item-services-title"),r=$(".biller-services-content");$('[data-element="gcredit"] > p');let l=$(".results-wrapper > .biller-table-header"),s=$(this).children(".biller-view-label").text().toLowerCase();if(!$(this).hasClass("no-result"))switch($(".biller-view-options.w-radio").removeClass("active"),$(this).addClass("active"),s){case"list view":e.removeClass("card-view").addClass("list-view"),l.addClass("list-view"),1===parseInt(r.attr("data-gcredit"))?a.text(a.text("GCredit")):1===parseInt(r.attr("data-ggives"))?a.text(a.text("GGives")):a.text("GCredit, GGives");break;case"card view":e.removeClass("list-view").addClass("card-view"),l.removeClass("list-view"),1===parseInt(r.attr("data-gcredit"))?a.text(a.text("Accepts GCredit")):1===parseInt(r.attr("data-ggives"))?a.text(a.text("Accepts GGives")):a.text("Accepts GCredit, GGives");break;default:e.removeClass("list-view card-view"),l.removeClass("list-view"),1===parseInt(r.attr("data-gcredit"))?a.text(a.text("Accepts GCredit")):1===parseInt(r.attr("data-ggives"))?a.text(a.text("Accepts GGives")):a.text("Accepts GCredit, GGives")}t.animate({opacity:[0,1]},300)}),o.on("click",function(){let e="";$(this).hasClass("disabled")||(d=$(this).data("letter"),o.removeClass("selected"),$(this).addClass("selected"),0==c.length?(s.test(d)?(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>s.test(e.name.charAt(0))),m.length>0&&(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>s.test(e.name.charAt(0))&&e.name.toLowerCase().includes(m)))):(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().startsWith(d)),m.length>0&&(g=p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().startsWith(d)&&e.name.toLowerCase().includes(m)))),e=`Starting Letter: ${d} and ${m}`):g=s.test(d)?p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>s.test(e.name.charAt(0))&&e.biller_type.includes(c)):p.sort((e,t)=>e.name.localeCompare(t.name)).filter(e=>e.name.toLowerCase().startsWith(d)&&e.biller_type.includes(c)),0==g.length?(e=`Category: ${c}, Starting Letter: ${d}`,u(g),w(g),f(!0,e)):(l.pagination("destroy"),u(g),f(!1)),v())}),n.on("click",function(){let r=$(".biller_dropdown-current");$(this).hasClass("no-filters")||(r.text("All Categories"),g=p,c="",d="",o.removeClass("selected"),a.val(""),renderItems(t,p,e),w(p),u(p.sort((e,t)=>e.name.localeCompare(t.name))),f(!1)),v()}),$(window).resize(function(){$(window).width()!=C&&(C=$(window).width(),u(p.sort((e,t)=>e.name.localeCompare(t.name))))}),w(p),u(p.sort((e,t)=>e.name.localeCompare(t.name)))}();
